{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block title %} Model {% endblock %}
{% block content %}

  <header id="gtco-header" class="gtco-cover gtco-cover-sm" role="banner" style="background-image: url({% static 'website/images/img_model_main.jpg' %})">
    <div class="overlay"></div>
    <div class="gtco-container">
      <div class="row">
        <div class="col-md-12 col-md-offset-0 text-left">
          <div class="row row-mt-15em">
            <div class="col-md-7 mt-text animate-box" data-animate-effect="fadeInUp">
              <span class="intro-text-small">Let the algorithm do the hard stuff!</span>
              <h1>The Model</h1> 
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
<div class="gtco-section" style="padding-bottom: 5px;">
    <div class="gtco-container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2 text-center gtco-heading">
            <p>Let's get down to the nitty-gritty!</p>
            <h2>Calculate the price of your car</h2>
          <h1>{{ message }}</h1>
        </div>
      </div>
      <div class="row">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<form class="" action="prediction" method="post" onsubmit="return mySubmitFunction(event)">
          {% csrf_token %}
          {% for error in errors  %}
          <div class="alert alert-danger mb-4" role="alert">
            <strong>{{ error }}</strong>
          </div>
          {% endfor %}
          <div class="form-row">
            <div class="form-group col-md-6">
              <label>Make:</label>
                {{ form.make }}
            </div>
            <div class="form-group col-md-6">
              <label>Model:</label>
              <select id="id_model" class="form-control" name="model">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Body type:</label>
              <select id="id_body_type" class="form-control" name="body_type">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Fuel type:</label>
              <select id="id_fuel_type" class="form-control" name="fuel_type">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Transmission:</label>
              <select id="id_transmission" class="form-control" name="transmission">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Power (hp):</label>
              <select id="id_horsepower" class="form-control" name="horsepower">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Engine displacement (cc):</label>
              <select id="id_displacement" class="form-control" name="displacement">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Engine type:</label>
              <select id="id_engine_type" class="form-control" name="engine_type">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Torque power (lb-ft):</label>
              <select id="id_torque_power" class="form-control" name="torque_power">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>RPM at maximum Torque (rpm):</label>
              <select id="id_torque_rpm" class="form-control" name="torque_rpm">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>RPM at maximum Power (rpm):</label>
              <select id="id_power_rpm" class="form-control" name="power_rpm">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Wheel system:</label>
              <select id="id_wheel_system" class="form-control" name="wheel_system">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Gears:</label>
              <select id="id_transmission_display" class="form-control" name="transmission_display">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Year:</label>
              <select id="id_year" class="form-control" name="year">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Fuel tank volume (gal):</label>
              <select id="id_fuel_tank_volume" class="form-control" name="fuel_tank_volume">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>City fuel economy (miles/gal):</label>
              <select id="id_city_fuel_economy" class="form-control" name="city_fuel_economy">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Highway fuel economy (miles/gal):</label>
              <select id="id_highway_fuel_economy" class="form-control" name="highway_fuel_economy">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Number of seats:</label>
              <select id="id_maximum_seating" class="form-control" name="maximum_seating">
                <option value="Empty">-</option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label>Color:</label>
              {{ form.exterior_color }}
            </div>
            <div class="form-group col-md-6">
              <label>Vehicle condition:</label>
              {{ form.is_new }}
            </div>
            <div class="form-group col-md-6">
              <label>Mileage (miles):</label>
              {{ form.mileage }}
            </div>
            <div row>
              <div class="row row-pb-md">
              </div>
            </div>
            <div class="form-group col-md-6">
              <button type="submit" class="btn btn-primary">Calculate</button>
              <label id="submit_label"></label>
            </div>
        </form>


        

        <script language="JavaScript"><!--
        function mySubmitFunction(e) {
          var maximum_seating = $("#id_maximum_seating").val();
          var highway_fuel_economy = $("#id_highway_fuel_economy").val();
          var city_fuel_economy = $("#id_city_fuel_economy").val();
          var fuel_tank_volume = $("#id_fuel_tank_volume").val();
          var year = $("#id_year").val();
          var transmission_display = $("#id_transmission_display").val();
          var wheel_system = $("#id_wheel_system").val();
          var power_rpm = $("#id_power_rpm").val();
          var torque_rpm = $("#id_torque_rpm").val();
          var torque_power = $("#id_torque_power").val();
          var engine_type = $("#id_engine_type").val();
          var displacement = $("#id_displacement").val();
          var horsepower = $("#id_horsepower").val();
          var transmission = $("#id_transmission").val();
          var fuel = $("#id_fuel_type").val();
          var body = $("#id_body_type").val();
          var model = $("#id_model").val();
          var make = $("#id_make").val();
          let myVars = [make, model, body, fuel, transmission, horsepower, displacement, engine_type, torque_power, torque_rpm, power_rpm, wheel_system, transmission_display, year, fuel_tank_volume, city_fuel_economy, highway_fuel_economy, maximum_seating]

          if (myVars.includes("") || myVars.includes("Empty")) {
            document.getElementById('submit_label').innerHTML = 'Form incomplete. Please, fill out every field!';
            e.preventDefault();
            someBug();
            return false;
          } else {
            return true;
          }
        }
        </script>

        <script type="text/javascript">        
        $(document).on('change', "#id_make", function () {
              var make = $(this).val();
              $.ajax({
                type: "POST",
                url: "{% url 'get-model' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'make': make,
                },
                success: function (data) {
                  console.log(data.models);
                  if (data.models.length != 1) {
                    let html_data = '<option value="">----------Select Model----------</option>';
                      data.models.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_model").html(html_data);
                  } else {
                    let html_data = [];
                      data.models.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_model").html(html_data);
                    trigger_model();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_body_type").html(clear_dropdown);
                  $("#id_fuel_type").html(clear_dropdown);
                  $("#id_transmission").html(clear_dropdown);
                  $("#id_horsepower").html(clear_dropdown);
                  $("#id_displacement").html(clear_dropdown);
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_model() {
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getBodyType' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.body_types);
                  if (data.body_types.length != 1) {
                    let html_data = '<option value="">----------Select Body Type----------</option>';
                      data.body_types.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_body_type").html(html_data);
                  } else {
                    let html_data = [];
                      data.body_types.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_body_type").html(html_data);
                    trigger_body_type();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_fuel_type").html(clear_dropdown);
                  $("#id_transmission").html(clear_dropdown);
                  $("#id_horsepower").html(clear_dropdown);
                  $("#id_displacement").html(clear_dropdown);
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });     
        }
        
        $(document).on('change', "#id_model", function () {
              var model = $(this).val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getBodyType' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.body_types);
                  if (data.body_types.length != 1) {
                    let html_data = '<option value="">----------Select Body Type----------</option>';
                      data.body_types.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_body_type").html(html_data);
                  } else {
                    let html_data = [];
                      data.body_types.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_body_type").html(html_data);
                    trigger_body_type();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_fuel_type").html(clear_dropdown);
                  $("#id_transmission").html(clear_dropdown);
                  $("#id_horsepower").html(clear_dropdown);
                  $("#id_displacement").html(clear_dropdown);
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_body_type() {
            var body = $("#id_body_type").val();
            var model = $("#id_model").val();
            var make = $("#id_make").val();
            $.ajax({
              type: "POST",
              url: "{% url 'getFuelType' %}",
              data: {
                'csrfmiddlewaretoken': '{{ csrf_token }}',
                'body': body,
                'model': model,
                'make': make,
              },
              success: function (data) {
                console.log(data.fuel_types);
                if (data.fuel_types.length != 1) {
                  let html_data = '<option value="">----------Select Fuel Type----------</option>';
                    data.fuel_types.forEach(function (data) {
                        html_data += `<option value="${data}">${data}</option>`
                  });
                  $("#id_fuel_type").html(html_data);
                } else {
                  let html_data = [];
                    data.fuel_types.forEach(function (data) {
                        html_data += `<option value="${data}">${data}</option>`

                  });
                  $("#id_fuel_type").html(html_data);
                  trigger_fuel_type();
                }
                clear_dropdown = '<option value="">-</option>';
                $("#id_transmission").html(clear_dropdown);
                $("#id_horsepower").html(clear_dropdown);
                $("#id_displacement").html(clear_dropdown);
                $("#id_engine_type").html(clear_dropdown);
                $("#id_torque_power").html(clear_dropdown);
                $("#id_torque_rpm").html(clear_dropdown);
                $("#id_power_rpm").html(clear_dropdown);
                $("#id_wheel_system").html(clear_dropdown);
                $("#id_transmission_display").html(clear_dropdown);
                $("#id_year").html(clear_dropdown);
                $("#id_fuel_tank_volume").html(clear_dropdown);
                $("#id_city_fuel_economy").html(clear_dropdown);
                $("#id_highway_fuel_economy").html(clear_dropdown);
                $("#id_maximum_seating").html(clear_dropdown);
              }
            }); 
        }
       
        $(document).on('change', "#id_body_type", function () {
              var body = $(this).val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getFuelType' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.fuel_types);
                  if (data.fuel_types.length != 1) {
                    let html_data = '<option value="">----------Select Fuel Type----------</option>';
                      data.fuel_types.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_fuel_type").html(html_data);
                  } else {
                    let html_data = [];
                      data.fuel_types.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_fuel_type").html(html_data);
                    trigger_fuel_type();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_transmission").html(clear_dropdown);
                  $("#id_horsepower").html(clear_dropdown);
                  $("#id_displacement").html(clear_dropdown);
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_fuel_type() {
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getTransmission' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.transmissions);
                  if (data.transmissions.length != 1) {
                    let html_data = '<option value="">----------Select Transmission----------</option>';
                      data.transmissions.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_transmission").html(html_data);
                  } else {
                    let html_data = [];
                      data.transmissions.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_transmission").html(html_data);
                    trigger_transmission();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_horsepower").html(clear_dropdown);
                  $("#id_displacement").html(clear_dropdown);
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });     
        }
        
        $(document).on('change', "#id_fuel_type", function () {
              var fuel = $(this).val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getTransmission' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.transmissions);
                  if (data.transmissions.length != 1) {
                    let html_data = '<option value="">----------Select Transmission----------</option>';
                      data.transmissions.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_transmission").html(html_data);
                  } else {
                    let html_data = [];
                      data.transmissions.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_transmission").html(html_data);
                    trigger_transmission();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_horsepower").html(clear_dropdown);
                  $("#id_displacement").html(clear_dropdown);
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_transmission() {
          var transmission = $("#id_transmission").val();
          var fuel = $("#id_fuel_type").val();
          var body = $("#id_body_type").val();
          var model = $("#id_model").val();
          var make = $("#id_make").val();
          $.ajax({
            type: "POST",
            url: "{% url 'getHorsepower' %}",
            data: {
              'csrfmiddlewaretoken': '{{ csrf_token }}',
              'transmission': transmission,
              'fuel': fuel,
              'body': body,
              'model': model,
              'make': make,
            },
            success: function (data) {
              console.log(data.horsepowers);
              if (data.horsepowers.length != 1) {
                let html_data = '<option value="">----------Select Power (hp)----------</option>';
                  data.horsepowers.forEach(function (data) {
                      html_data += `<option value="${data}">${data}</option>`
                });
                $("#id_horsepower").html(html_data);
              } else {
                let html_data = [];
                  data.horsepowers.forEach(function (data) {
                      html_data += `<option value="${data}">${data}</option>`

                });
                $("#id_horsepower").html(html_data);
                trigger_horsepower();
            }
              clear_dropdown = '<option value="">-</option>';
              $("#id_displacement").html(clear_dropdown);
              $("#id_engine_type").html(clear_dropdown);
              $("#id_torque_power").html(clear_dropdown);
              $("#id_torque_rpm").html(clear_dropdown);
              $("#id_power_rpm").html(clear_dropdown);
              $("#id_wheel_system").html(clear_dropdown);
              $("#id_transmission_display").html(clear_dropdown);
              $("#id_year").html(clear_dropdown);
              $("#id_fuel_tank_volume").html(clear_dropdown);
              $("#id_city_fuel_economy").html(clear_dropdown);
              $("#id_highway_fuel_economy").html(clear_dropdown);
              $("#id_maximum_seating").html(clear_dropdown);
            }
          });
        }
        
        $(document).on('change', "#id_transmission", function () {
              var transmission = $(this).val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getHorsepower' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.horsepowers);
                  if (data.horsepowers.length != 1) {
                    let html_data = '<option value="">----------Select Power (hp)----------</option>';
                      data.horsepowers.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_horsepower").html(html_data);
                  } else {
                    let html_data = [];
                      data.horsepowers.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_horsepower").html(html_data);
                    trigger_horsepower();
                }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_displacement").html(clear_dropdown);
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_horsepower() {
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getEngineDisplacement' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.displacements);
                  if (data.displacements.length != 1) {
                    let html_data = '<option value="">----------Select Displacement (cc)----------</option>';
                      data.displacements.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_displacement").html(html_data);
                  } else {
                    let html_data = [];
                      data.displacements.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_displacement").html(html_data);
                    trigger_displacement();
                }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }
        
        $(document).on('change', "#id_horsepower", function () {
              var horsepower = $(this).val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getEngineDisplacement' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.displacements);
                  if (data.displacements.length != 1) {
                    let html_data = '<option value="">----------Select Displacement (cc)----------</option>';
                      data.displacements.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_displacement").html(html_data);
                  } else {
                    let html_data = [];
                      data.displacements.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_displacement").html(html_data);
                    trigger_displacement();
                }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_engine_type").html(clear_dropdown);
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_displacement() {
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getEngineType' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.engines);
                  if (data.engines.length != 1) {
                    let html_data = '<option value="">----------Select Engine Type----------</option>';
                      data.engines.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_engine_type").html(html_data);
                  } else {
                    let html_data = [];
                      data.engines.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_engine_type").html(html_data);
                    trigger_engine_type();
                }
                  $("#id_engine_type").html(html_data);
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }
        
        $(document).on('change', "#id_displacement", function () {
              var displacement = $(this).val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getEngineType' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.engines);
                  if (data.engines.length != 1) {
                    let html_data = '<option value="">----------Select Engine Type----------</option>';
                      data.engines.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_engine_type").html(html_data);
                  } else {
                    let html_data = [];
                      data.engines.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_engine_type").html(html_data);
                    trigger_engine_type();
                }
                  $("#id_engine_type").html(html_data);
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_torque_power").html(clear_dropdown);
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_engine_type() {
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getTorquePower' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.torques);
                  if (data.torques.length != 1) {
                    let html_data = '<option value="">----------Select Max. Torque (lb-ft)----------</option>';
                      data.torques.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_torque_power").html(html_data);
                  } else {
                    let html_data = [];
                      data.torques.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_torque_power").html(html_data);
                    trigger_torque_power();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }
        
        $(document).on('change', "#id_engine_type", function () {
              var engine_type = $(this).val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getTorquePower' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.torques);
                  if (data.torques.length != 1) {
                    let html_data = '<option value="">----------Select Max. Torque (lb-ft)----------</option>';
                      data.torques.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_torque_power").html(html_data);
                  } else {
                    let html_data = [];
                      data.torques.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_torque_power").html(html_data);
                    trigger_torque_power();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_torque_rpm").html(clear_dropdown);
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_torque_power() {
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getTorqueRpm' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.trpm);
                  if (data.trpm.length != 1) {
                    let html_data = '<option value="">----------Select Max. Torque (rpm)----------</option>';
                      data.trpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_torque_rpm").html(html_data);
                  } else {
                    let html_data = [];
                      data.trpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_torque_rpm").html(html_data);
                    trigger_torque_rpm();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }

        $(document).on('change', "#id_torque_power", function () {
              var torque_power = $(this).val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getTorqueRpm' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.trpm);
                  if (data.trpm.length != 1) {
                    let html_data = '<option value="">----------Select Max. Torque (rpm)----------</option>';
                      data.trpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_torque_rpm").html(html_data);
                  } else {
                    let html_data = [];
                      data.trpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_torque_rpm").html(html_data);
                    trigger_torque_rpm();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_power_rpm").html(clear_dropdown);
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_torque_rpm() {
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getPowerRpm' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.prpm);
                  if (data.prpm.length != 1) {
                    let html_data = '<option value="">----------Select Max. Power (rpm)----------</option>';
                      data.prpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_power_rpm").html(html_data);
                  } else {
                    let html_data = [];
                      data.prpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_power_rpm").html(html_data);
                    trigger_power_rpm();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }

        $(document).on('change', "#id_torque_rpm", function () {
              var torque_rpm = $(this).val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getPowerRpm' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.prpm);
                  if (data.prpm.length != 1) {
                    let html_data = '<option value="">----------Select Max. Power (rpm)----------</option>';
                      data.prpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_power_rpm").html(html_data);
                  } else {
                    let html_data = [];
                      data.prpm.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_power_rpm").html(html_data);
                    trigger_power_rpm();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_wheel_system").html(clear_dropdown);
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_power_rpm() {
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getWheelSystem' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.wheels);
                  if (data.wheels.length != 1) {
                    let html_data = '<option value="">----------Select Wheel System----------</option>';
                      data.wheels.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_wheel_system").html(html_data);
                  } else {
                    let html_data = [];
                      data.wheels.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_wheel_system").html(html_data);
                    trigger_wheel_system();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });  
        }

        $(document).on('change', "#id_power_rpm", function () {
              var power_rpm = $(this).val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getWheelSystem' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.wheels);
                  if (data.wheels.length != 1) {
                    let html_data = '<option value="">----------Select Wheel System----------</option>';
                      data.wheels.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_wheel_system").html(html_data);
                  } else {
                    let html_data = [];
                      data.wheels.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_wheel_system").html(html_data);
                    trigger_wheel_system();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_transmission_display").html(clear_dropdown);
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_wheel_system() {
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getGear' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.getAllResponseHeaders);
                  if (data.gears.length != 1) {
                    let html_data = '<option value="">----------Select Number of Gears----------</option>';
                      data.gears.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_transmission_display").html(html_data);
                  } else {
                    let html_data = [];
                      data.gears.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_transmission_display").html(html_data);
                    trigger_transmission_display();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }

        $(document).on('change', "#id_wheel_system", function () {
              var wheel_system = $(this).val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getGear' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.getAllResponseHeaders);
                  if (data.gears.length != 1) {
                    let html_data = '<option value="">----------Select Number of Gears----------</option>';
                      data.gears.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_transmission_display").html(html_data);
                  } else {
                    let html_data = [];
                      data.gears.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_transmission_display").html(html_data);
                    trigger_transmission_display();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_year").html(clear_dropdown);
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });
        

        function trigger_transmission_display() {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getYear' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.years);
                  if (data.years.length != 1) {
                    let html_data = '<option value="">----------Select Year----------</option>';
                      data.years.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_year").html(html_data);
                  } else {
                    let html_data = [];
                      data.years.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_year").html(html_data);
                    trigger_year();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }


        $(document).on('change', "#id_transmission_display", function () {
              var transmission_display = $(this).val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getYear' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.years);
                  if (data.years.length != 1) {
                    let html_data = '<option value="">----------Select Year----------</option>';
                      data.years.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_year").html(html_data);
                  } else {
                    let html_data = [];
                      data.years.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_year").html(html_data);
                    trigger_year();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_fuel_tank_volume").html(clear_dropdown);
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_year() {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getFuelTankVolume' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.tanks);
                  if (data.tanks.length != 1) {
                    let html_data = '<option value="">----------Select Fuel Tank Volume (gal)----------</option>';
                      data.tanks.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_fuel_tank_volume").html(html_data);
                  } else {
                    let html_data = [];
                      data.tanks.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_fuel_tank_volume").html(html_data);
                    trigger_fuel_tank_volume();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }
        
        $(document).on('change', "#id_year", function () {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getFuelTankVolume' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.tanks);
                  if (data.tanks.length != 1) {
                    let html_data = '<option value="">----------Select Fuel Tank Volume (gal)----------</option>';
                      data.tanks.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_fuel_tank_volume").html(html_data);
                  } else {
                    let html_data = [];
                      data.tanks.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_fuel_tank_volume").html(html_data);
                    trigger_fuel_tank_volume();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_city_fuel_economy").html(clear_dropdown);
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_fuel_tank_volume() {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getCityFuelEconomy' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.cities);
                  if (data.cities.length != 1) {
                    let html_data = '<option value="">----------Select City Fuel Economy (miles/gal)----------</option>';
                      data.cities.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_city_fuel_economy").html(html_data);
                  } else {
                    let html_data = [];
                      data.cities.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_city_fuel_economy").html(html_data);
                    trigger_city_fuel_economy();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
   
        }
        
        $(document).on('change', "#id_fuel_tank_volume", function () {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getCityFuelEconomy' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.cities);
                  if (data.cities.length != 1) {
                    let html_data = '<option value="">----------Select City Fuel Economy (miles/gal)----------</option>';
                      data.cities.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_city_fuel_economy").html(html_data);
                  } else {
                    let html_data = [];
                      data.cities.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_city_fuel_economy").html(html_data);
                    trigger_city_fuel_economy();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_highway_fuel_economy").html(clear_dropdown);
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });
        
        function trigger_city_fuel_economy() {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getHighwayFuelEconomy' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.highways);
                  if (data.highways.length != 1) {
                    let html_data = '<option value="">----------Select Highway Fuel Economy (miles/gal)----------</option>';
                      data.highways.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_highway_fuel_economy").html(html_data);
                  } else {
                    let html_data = [];
                      data.highways.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_highway_fuel_economy").html(html_data);
                    trigger_highway_fuel_economy();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
        }


        $(document).on('change', "#id_city_fuel_economy", function () {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getHighwayFuelEconomy' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.highways);
                  if (data.highways.length != 1) {
                    let html_data = '<option value="">----------Select Highway Fuel Economy (miles/gal)----------</option>';
                      data.highways.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_highway_fuel_economy").html(html_data);
                  } else {
                    let html_data = [];
                      data.highways.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_highway_fuel_economy").html(html_data);
                    trigger_highway_fuel_economy();
                  }
                  clear_dropdown = '<option value="">-</option>';
                  $("#id_maximum_seating").html(clear_dropdown);
                }
              });
          });

        function trigger_highway_fuel_economy() {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getSeats' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.seats);
                  if (data.seats.length != 1) {
                    let html_data = '<option value="">----------Select Seats----------</option>';
                      data.seats.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_maximum_seating").html(html_data);
                  } else {
                    let html_data = [];
                      data.seats.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_maximum_seating").html(html_data);
                    trigger_maximum_seating();
                  }
                }
              });
        }
        
        $(document).on('change', "#id_highway_fuel_economy", function () {
              var transmission_display = $("#id_transmission_display").val();
              var wheel_system = $("#id_wheel_system").val();
              var power_rpm = $("#id_power_rpm").val();
              var torque_rpm = $("#id_torque_rpm").val();
              var torque_power = $("#id_torque_power").val();
              var engine_type = $("#id_engine_type").val();
              var displacement = $("#id_displacement").val();
              var horsepower = $("#id_horsepower").val();
              var transmission = $("#id_transmission").val();
              var fuel = $("#id_fuel_type").val();
              var body = $("#id_body_type").val();
              var model = $("#id_model").val();
              var make = $("#id_make").val();
              $.ajax({
                type: "POST",
                url: "{% url 'getSeats' %}",
                data: {
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                  'transmission_display': transmission_display,
                  'wheel_system': wheel_system,
                  'power_rpm': power_rpm,
                  'torque_rpm': torque_rpm,
                  'torque_power': torque_power,
                  'engine_type': engine_type,
                  'displacement': displacement,
                  'horsepower': horsepower,
                  'transmission': transmission,
                  'fuel': fuel,
                  'body': body,
                  'model': model,
                  'make': make,
                },
                success: function (data) {
                  console.log(data.seats);
                  if (data.seats.length != 1) {
                    let html_data = '<option value="">----------Select Seats----------</option>';
                      data.seats.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`
                    });
                    $("#id_maximum_seating").html(html_data);
                  } else {
                    let html_data = [];
                      data.seats.forEach(function (data) {
                          html_data += `<option value="${data}">${data}</option>`

                    });
                    $("#id_maximum_seating").html(html_data);
                    trigger_maximum_seating();
                  }
                }
              });
          });
        </script>
      </div>
    </div>
  </div>


  </div>


{% endblock %} 